function m(b,a,c,d){b.j.sb(b.vb,a,c,d)}function n(b,a,c,d){b.j.ea?m(b,a,c,d):b.j.Ye()._OnMessageFromDOM({type:"event",component:b.vb,handler:a,dispatchOpts:d||null,data:c,responseId:null})}function aa(b,a,c){b.j.B(b.vb,a,c)}function p(b,a){for(const [c,d]of a)aa(b,c,d)}function v(b){b.ac||(b.j.Fc(b.oe),b.ac=!0)}window.Qa=class{constructor(b,a){this.j=b;this.vb=a;this.ac=!1;this.oe=()=>this.Ta()}wd(){}Ta(){}};
window.Jf=class{constructor(){this.rd=-1}l(){-1!==this.rd&&(self.clearTimeout(this.rd),this.rd=-1)}};"use strict";class ca{constructor(b){this.yb=b;this.Yc=!1;this.ed=!0;this.Ab=this.ra=this.sd=-1}}
function da(b,a){const c=a.elementId,d=b.Pb(c,a),e=new ca(d);b.La.set(c,e);d.style.boxSizing="border-box";d.style.display="none";e.ed=!!a.isVisible;var f=b.Ic(d);f.addEventListener("focus",()=>{w(b,"elem-focused",c)});f.addEventListener("blur",()=>{w(b,"elem-blurred",c)});f=a.htmlIndex;e.sd=f;e.Ab=a.htmlZIndex;b.Xa&&(a=b.j.xc(f),e.ra=a,b.j.Qb(a).appendChild(d))}function x(b,a,c){aa(b,a,d=>{const e=y(b,d.elementId);return c(e,d)})}
function y(b,a){b=b.La.get(a);if(!b)throw Error(`no element with id ${a}`);return b.yb}function w(b,a,c,d){d||(d={});d.elementId=c;m(b,a,d)}function z(b,a,c,d){d||(d={});d.elementId=c;n(b,a,d)}
window.mb=class extends self.Qa{constructor(b,a){super(b,a);this.La=new Map;this.Xa=!0;p(this,[["create",c=>da(this,c)],["destroy",c=>{c=c.elementId;const d=y(this,c);this.Bd(d);this.Xa&&d.parentElement.removeChild(d);this.La.delete(c)}],["set-visible",c=>{if(this.Xa){var d=this.La.get(c.elementId),e=d.yb;d.Yc?e.style.display=c.isVisible?"":"none":d.ed=!!c.isVisible}}],["update-position",c=>{if(this.Xa){var d=this.La.get(c.elementId),e=d.yb,f=this.j;e.style.left=c.left+"px";e.style.top=c.top+"px";
e.style.width=c.width+"px";e.style.height=c.height+"px";var g=c.fontSize;null!==g&&(e.style.fontSize=g+"em");g=c.htmlIndex;d.sd=g;g=f.xc(g);g!==d.ra&&(e.remove(),f.Qb(g).appendChild(e),d.ra=g,f.Sc());c=c.htmlZIndex;c!==d.Ab&&(d.Ab=c,f.Sc());d.Yc||(d.Yc=!0,d.ed&&(e.style.display=""))}}],["update-state",c=>{const d=y(this,c.elementId);this.Ua(d,c)}],["focus",c=>this.Pc(c)],["set-css-style",c=>{const d=y(this,c.elementId),e=c.prop;c=c.val;e.startsWith("--")?d.style.setProperty(e,c):d.style[e]=c}],["set-attribute",
c=>{y(this,c.elementId).setAttribute(c.name,c.val)}],["remove-attribute",c=>{y(this,c.elementId).removeAttribute(c.name)}]]);x(this,"get-element",c=>c)}Pb(){throw Error("required override");}Bd(){}Ua(){throw Error("required override");}Ic(b){return b}Pc(b){const a=this.Ic(y(this,b.elementId));b.focus?a.focus():a.blur()}};"use strict";const ea=/(iphone|ipod|ipad|macos|macintosh|mac os x)/i.test(navigator.userAgent),A=/android/i.test(navigator.userAgent);let fa=0;
function ha(b){const a=document.createElement("script");a.async=!1;a.type="module";return b.zf?new Promise(c=>{const d="c3_resolve_"+fa;++fa;self[d]=c;a.textContent=b.Df+`\n\nself["${d}"]();`;document.head.appendChild(a)}):new Promise((c,d)=>{a.onload=c;a.onerror=d;a.src=b;document.head.appendChild(a)})}
async function ia(){if(!navigator.userActivation||"undefined"===typeof OffscreenCanvas)return!1;try{let b=!1;const a=new Worker(URL.createObjectURL(new Blob(['\n\tself.addEventListener("message", () =>\n\t{\n\t\ttry {\n\t\t\tconst offscreenCanvas = new OffscreenCanvas(32, 32);\n\t\t\tconst gl = offscreenCanvas.getContext("webgl");\n\t\t\tself.postMessage(!!gl);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\tconsole.warn("Feature detection worker error:", err);\n\t\t\tself.postMessage(false);\n\t\t}\n\t});'],{type:"text/javascript"})),
{get type(){b=!0}}),c=await new Promise(d=>{a.addEventListener("message",e=>{a.terminate();d(e.data)});a.postMessage("")});return b&&c}catch(b){return console.warn("Error feature detecting worker mode: ",b),!1}}let C=new Audio;
const ja={"audio/webm; codecs=opus":!!C.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!C.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!C.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!C.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!C.canPlayType("audio/mp4"),"audio/mpeg":!!C.canPlayType("audio/mpeg")};C=null;async function ka(b){b=await la(b);return(new TextDecoder("utf-8")).decode(b)}
function la(b){return new Promise((a,c)=>{const d=new FileReader;d.onload=e=>a(e.target.result);d.onerror=e=>c(e);d.readAsArrayBuffer(b)})}const ma=[];let D=0;window.RealFile=window.File;const F=[],na=new Map,oa=new Map;let pa=0;const qa=[];self.runOnStartup=function(b){if("function"!==typeof b)throw Error("runOnStartup called without a function");qa.push(b)};const ra=new Set(["cordova","playable-ad","instant-games"]);let ua=!1;
window.ba=class b{constructor(a){this.ea=a.Ff;this.Aa=null;this.aa="";this.hb=a.Cf;this.Nb={};this.ab=this.wa=null;this.Za=[];this.na=null;this.be=!0;this.M=[];this.ld=[];this.md=!1;this.pe=()=>this.We();this.bd=!1;this.Wd=0;this.Cb=null;this.gb=-1;this.vf=()=>this.gf();this.Kb=new Set;this.td=null;this.qe=[];this.u=a.re;this.cc="file"===location.protocol.substr(0,4);if("playable-ad"===this.u||"instant-games"===this.u)this.ea=!1;if("cordova"===this.u&&this.ea&&A){const c=/Chrome\/(\d+)/i.exec(navigator.userAgent);
c&&90<=parseInt(c[1],10)||(this.ea=!1)}this.pa()?self.chrome.webview.addEventListener("message",c=>this.Md(c.data)):"macos-wkwebview"===this.u&&(self.C3WrapperOnMessage=c=>this.Md(c));this.fc=this.ta=null;"html5"!==this.u||window.isSecureContext||console.warn("[Construct] Warning: the browser indicates this is not a secure context. Some features may be unavailable. Use secure (HTTPS) hosting to ensure all features are available.");this.B("canvas","update-size",c=>this.lf(c));this.B("canvas","set-html-layer-count",
c=>this._OnSetHTMLLayerCount(c));this.B("canvas","cleanup-html-layers",()=>this.bf());this.B("runtime","cordova-fetch-local-file",c=>this.cf(c));this.B("runtime","create-job-worker",()=>this.df());this.B("runtime","send-wrapper-extension-message",c=>this.kf(c));"cordova"===this.u?document.addEventListener("deviceready",()=>this.Kd(a)):this.Kd(a)}l(){this.Gc();this.Aa&&(this.Aa=this.Aa.onmessage=null);this.wa&&(this.wa.terminate(),this.wa=null);this.ab&&(this.ab.l(),this.ab=null);for(const {canvas:a,
kb:c}of this.M)a.remove(),c.remove();this.M.length=0}Cd(){return this.M[0].canvas}xc(a){return Math.min(a,this.M.length-1)}Qb(a){if(0>a||a>=this.M.length)throw new RangeError("invalid canvas layer");return this.M[a].kb}Me(){return ea&&"cordova"===this.u}qb(){const a=navigator.userAgent;return ea&&ra.has(this.u)||navigator.standalone||/crios\/|fxios\/|edgios\//i.test(a)}Ke(){return A}Dd(){return A&&ra.has(this.u)}Fd(){return"windows-webview2"===this.u||!!("preview"===this.u&&window.chrome&&window.chrome.webview&&
window.chrome.webview.postMessage)}pa(){return this.Fd()||"xbox-uwp-webview2"===this.u}async Kd(a){this.ea&&!await ia()&&(this.ea=!1);"macos-wkwebview"===this.u?this.Ha({type:"ready"}):this.pa()&&(this.nf(),this.qe=(await this.af()).registeredComponentIds);if("playable-ad"===this.u){this.ta=self.c3_base64files;this.fc={};await this.Te();for(let d=0,e=a.jb.length;d<e;++d){var c=a.jb[d];this.fc.hasOwnProperty(c)?a.jb[d]={zf:!0,Df:this.fc[c]}:this.ta.hasOwnProperty(c)&&(a.jb[d]=URL.createObjectURL(this.ta[c]))}a.uc=
[]}if("nwjs"===this.u&&self.nw&&self.nw.App.manifest["c3-steam-mode"]){let d=0;this.Fc(()=>{d++;document.body.style.opacity=0===d%2?"1":"0.999"})}a.Bf?this.aa=a.Bf:(c=location.origin,this.aa=("null"===c?"file:///":c)+location.pathname,c=this.aa.lastIndexOf("/"),-1!==c&&(this.aa=this.aa.substr(0,c+1)));a.Hf&&(this.Nb=a.Hf);c=new MessageChannel;this.Aa=c.port1;this.Aa.onmessage=d=>this._OnMessageFromRuntime(d.data);window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(d=>this.ff(d));this.Cb=
new self.Ne(this);await va(this.Cb);"object"===typeof window.StatusBar&&window.StatusBar.hide();if("object"===typeof window.AndroidFullScreen)try{await new Promise((d,e)=>{window.AndroidFullScreen.immersiveMode(d,e)})}catch(d){console.error("Failed to enter Android immersive mode: ",d)}this.ea?await this.$e(a,c.port2):await this.Ze(a,c.port2)}Jc(a){a=this.Nb.hasOwnProperty(a)?this.Nb[a]:a.endsWith("/workermain.js")&&this.Nb.hasOwnProperty("workermain.js")?this.Nb["workermain.js"]:"playable-ad"===
this.u&&this.ta.hasOwnProperty(a)?this.ta[a]:a;a instanceof Blob&&(a=URL.createObjectURL(a));return a}async wc(a,c,d){if(a.startsWith("blob:"))return new Worker(a,d);if("cordova"===this.u&&this.cc)return a=await this.Ob(d.yf?a:this.hb+a),new Worker(URL.createObjectURL(new Blob([a],{type:"application/javascript"})),d);a=new URL(a,c);if(location.origin!==a.origin){a=await fetch(a);if(!a.ok)throw Error("failed to fetch worker script");a=await a.blob();return new Worker(URL.createObjectURL(a),d)}return new Worker(a,
d)}qa(){return Math.max(window.innerWidth,1)}ha(){return Math.max(window.innerHeight,1)}Jd(a){var c=this.aa,d=location.href,e=this.qa(),f=this.ha(),g=window.devicePixelRatio,h=b.pb(),k=a.Nf,l=window.cr_previewImageBlobs||this.ta,q=window.cr_previewProjectFileBlobs,r=window.cr_previewProjectFiles,t=window.cr_swClientId||"";a=a.re;var u=(new URLSearchParams(self.location.search)).has("debug"),B=this.Cb;return{runtimeBaseUrl:c,previewUrl:d,windowInnerWidth:e,windowInnerHeight:f,devicePixelRatio:g,isFullscreen:h,
projectData:k,previewImageBlobs:l,previewProjectFileBlobs:q,previewProjectFileSWUrls:r,swClientId:t,exportType:a,isDebug:u,ife:!!self.Mf,jobScheduler:{inputPort:B.ad,outputPort:B.kd,maxNumWorkers:B.sf},supportedAudioFormats:ja,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.hb+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.hb+"opus.wasm.wasm",isFileProtocol:this.cc,isiOSCordova:this.Me(),isiOSWebView:this.qb(),isWindowsWebView2:this.Fd(),isAnyWebView2Wrapper:this.pa(),wrapperComponentIds:this.qe,
isFBInstantAvailable:"undefined"!==typeof self.FBInstant}}async $e(a,c){const d=this.Jc(a.Gf);"preview"===this.u?(this.wa=new Worker("previewworker.js",{type:"module",name:"Runtime"}),await new Promise((l,q)=>{const r=t=>{this.wa.removeEventListener("message",r);t.data&&"ok"===t.data.type?l():q()};this.wa.addEventListener("message",r);this.wa.postMessage({type:"construct-worker-init","import":(new URL(d,this.aa)).toString()})})):this.wa=await this.wc(d,this.aa,{type:"module",name:"Runtime",yf:!0});
const e=document.createElement("canvas");e.style.display="none";const f=e.transferControlToOffscreen();document.body.appendChild(e);const g=document.createElement("div");g.className="c3htmlwrap";document.body.appendChild(g);this.M.push({canvas:e,kb:g});window.c3canvas=e;self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders();let h=a.uc||[],k=a.jb;h=await Promise.all(h.map(l=>this.Va(l)));k=await Promise.all(k.map(l=>this.Va(l)));if("cordova"===this.u)for(let l=0,q=a.tc.length;l<q;++l){const r=
a.tc[l],t=r[0];if(t===a.ud||"scriptsInEvents.js"===t||t.endsWith("/scriptsInEvents.js"))r[1]=await this.Va(t)}this.wa.postMessage(Object.assign(this.Jd(a),{type:"init-runtime",isInWorker:!0,messagePort:c,canvas:f,workerDependencyScripts:h,engineScripts:k,projectScripts:a.tc,mainProjectScript:a.ud,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[c,f,...wa(this.Cb)]);this.Za=F.map(l=>new l(this));this.Id();xa(e);ya(g);za(this.na);self.c3_callFunction=(l,q)=>{var r=this.na;return r.j.Gd(r.vb,"js-invoke-function",
{name:l,params:q})};"preview"===this.u&&(self.goToLastErrorScript=()=>this.sb("runtime","go-to-last-error-script"))}async Ze(a,c){const d=document.createElement("canvas");d.style.display="none";document.body.appendChild(d);var e=document.createElement("div");e.className="c3htmlwrap";document.body.appendChild(e);this.M.push({canvas:d,kb:e});window.c3canvas=d;self.C3_InsertHTMLPlaceholders&&self.C3_InsertHTMLPlaceholders();this.Za=F.map(h=>new h(this));this.Id();xa(d);ya(e);e=a.jb.map(h=>"string"===
typeof h?(new URL(h,this.aa)).toString():h);if(Array.isArray(a.uc)){var f=[...a.uc].map(h=>h instanceof Blob?URL.createObjectURL(h):h);e.unshift(...f)}e=await Promise.all(e.map(h=>this.Va(h)));await Promise.all(e.map(h=>ha(h)));e=self.C3_ProjectScriptsStatus;f=a.ud;const g=a.tc;for(let [h,k]of g)if(k||(k=h),h===f)try{k=await this.Va(k),await ha(k),"preview"!==this.u||e[h]||this.Od(h,"main script did not run to completion")}catch(l){this.Od(h,l)}else if("scriptsInEvents.js"===h||h.endsWith("/scriptsInEvents.js"))k=
await this.Va(k),await ha(k);"preview"===this.u&&"object"!==typeof self.If.Kf?(this.Vb(),console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.")):(a=Object.assign(this.Jd(a),{isInWorker:!1,messagePort:c,canvas:d,runOnStartupFunctions:qa}),za(this.na),this.Ld(),this.ab=self.C3_CreateRuntime(a),await self.C3_InitRuntime(this.ab,
a))}Od(a,c){this.Vb();console.error(`[Preview] Failed to load project main script (${a}): `,c);alert(`Failed to load project main script (${a}). Check all your JavaScript code has valid syntax. Press F12 and check the console for error details.`)}Ld(){this.Vb()}Vb(){const a=window.cr_previewLoadingElem;a&&(a.parentElement.removeChild(a),window.cr_previewLoadingElem=null)}async df(){const a=await Aa(this.Cb);return{outputPort:a,transferables:[a]}}lf(a){if(!this.bd){var c=a.styleWidth+"px",d=a.styleHeight+
"px",e=a.marginLeft+"px",f=a.marginTop+"px";for(const {canvas:g,kb:h}of this.M)g.style.width=c,g.style.height=d,g.style.marginLeft=e,g.style.marginTop=f,h.style.width=c,h.style.height=d,h.style.marginLeft=e,h.style.marginTop=f,this.be&&(g.style.display="",h.style.display="");document.documentElement.style.setProperty("--construct-scale",a.displayScale);this.be=!1}}_OnSetHTMLLayerCount(a){var c=a.count,d=a.immediate,e=a.styleWidth+"px",f=a.styleHeight+"px";const g=a.marginLeft+"px",h=a.marginTop+"px";
a=[];const k=[];if(c<this.M.length)for(;this.M.length>c;){const {canvas:l,kb:q}=this.M.pop();q.remove();this.ea&&!d?this.ld.push(l):l.remove()}else if(c>this.M.length)for(let l=0,q=c-this.M.length;l<q;++l)c=document.createElement("canvas"),c.classList.add("c3overlay"),this.ea?(d=c.transferControlToOffscreen(),a.push(d),k.push(d)):a.push(c),document.body.appendChild(c),d=document.createElement("div"),d.classList.add("c3htmlwrap","c3overlay"),document.body.appendChild(d),c.style.width=e,c.style.height=
f,c.style.marginLeft=g,c.style.marginTop=h,d.style.width=e,d.style.height=f,d.style.marginLeft=g,d.style.marginTop=h,xa(c),ya(d),this.M.push({canvas:c,kb:d});for(const l of this.Za)if(l instanceof window.mb&&l.Xa)for(const q of l.La.values())e=l.j.xc(q.sd),f=q.ra,-1!==e&&-1!==f&&e!==f&&(f=q.yb,f.remove(),l.j.Qb(e).appendChild(f),q.ra=e);this.Sc();return{addedCanvases:a,transferables:k}}bf(){for(const a of this.ld)a.remove();this.ld.length=0}Sc(){this.md||(this.md=!0,this.Fc(this.pe))}We(){this.Nd(this.pe);
this.md=!1;let a=[];for(var c of this.Za)if(c instanceof window.mb){var d=c.Xa?[...c.La.values()]:null;d&&a.push(...d)}a.sort((g,h)=>{const k=g.ra,l=h.ra;return k!==l?k-l:g.Ab-h.Ab});let e=d=c=0,f=a.length;for(;e<f;++e){const g=a[e];g.ra!==c&&(this.Hd(c,a.slice(d,e)),c=g.ra,d=e)}d<e&&this.Hd(c,a.slice(d,e))}Hd(a,c){if(!(1>=c.length||a>=this.M.length)){c=c.map(k=>k.yb);var d=new Set(c);a=this.Qb(a);for(var e=Array.from(a.children).filter(k=>d.has(k)),f=0,g=Math.min(c.length,e.length);f<g&&c[f]===e[f];++f);
for(var h=f;h<g;++h)e[h].remove();for(h=f;h<g;++h)a.appendChild(c[h])}}Ye(){if(this.ea)throw Error("not available in worker mode");return this.ab}sb(a,c,d,e,f){this.Aa.postMessage({type:"event",component:a,handler:c,dispatchOpts:e||null,data:d,responseId:null},f)}Gd(a,c,d,e,f){const g=pa++,h=new Promise((k,l)=>{oa.set(g,{resolve:k,reject:l})});this.Aa.postMessage({type:"event",component:a,handler:c,dispatchOpts:e||null,data:d,responseId:g},f);return h}_OnMessageFromRuntime(a){const c=a.type;if("event"===
c)return this.ef(a);if("result"===c)this.hf(a);else if("runtime-ready"===c)this.jf();else if("alert-error"===c)this.Vb(),alert(a.message);else if("creating-runtime"===c)this.Ld();else throw Error(`unknown message '${c}'`);}ef(a){const c=a.component,d=a.handler,e=a.data,f=a.responseId;if(a=na.get(c))if(a=a.get(d)){var g=null;try{g=a(e)}catch(h){console.error(`Exception in '${c}' handler '${d}':`,h);null!==f&&this.Ub(f,!1,""+h);return}if(null===f)return g;g&&g.then?g.then(h=>this.Ub(f,!0,h)).catch(h=>
{console.error(`Rejection from '${c}' handler '${d}':`,h);this.Ub(f,!1,""+h)}):this.Ub(f,!0,g)}else console.warn(`[DOM] No handler '${d}' for component '${c}'`);else console.warn(`[DOM] No event handlers for component '${c}'`)}Ub(a,c,d){let e;d&&d.transferables&&(e=d.transferables);this.Aa.postMessage({type:"result",responseId:a,isOk:c,result:d},e)}hf(a){const c=a.responseId,d=a.isOk;a=a.result;const e=oa.get(c);d?e.resolve(a):e.reject(a);oa.delete(c)}B(a,c,d){let e=na.get(a);e||(e=new Map,na.set(a,
e));if(e.has(c))throw Error(`[DOM] Component '${a}' already has handler '${c}'`);e.set(c,d)}static xa(a){if(F.includes(a))throw Error("DOM handler already added");F.push(a)}Id(){for(const a of this.Za)if("runtime"===a.vb){this.na=a;return}throw Error("cannot find runtime DOM handler");}ff(a){this.sb("debugger","message",a)}jf(){for(const a of this.Za)a.wd()}static pb(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||ua)}static Wb(a){ua=!!a}Fc(a){this.Kb.add(a);
this.Rc()}Nd(a){this.Kb.delete(a);0===this.Kb.size&&this.Gc()}Rc(){-1===this.gb&&0<this.Kb.size&&(this.gb=requestAnimationFrame(this.vf))}Gc(){-1!==this.gb&&(cancelAnimationFrame(this.gb),this.gb=-1)}gf(){this.gb=-1;for(const a of this.Kb)a();this.Rc()}Ga(a){this.na.Ga(a)}Sa(a){this.na.Sa(a)}Qc(){this.na.Qc()}Tb(a){this.na.Tb(a)}Le(){return!!ja["audio/webm; codecs=opus"]}async pf(a){a=await this.Gd("runtime","opus-decode",{arrayBuffer:a},null,[a]);return new Float32Array(a)}Pe(a){this.bd=!0;this.Wd=
a}Je(a){return/^(?:[a-z\-]+:)?\/\//.test(a)||"data:"===a.substr(0,5)||"blob:"===a.substr(0,5)}Ed(a){return!this.Je(a)}async Va(a){return"cordova"===this.u&&(a.startsWith("file:")||this.cc&&this.Ed(a))?(a.startsWith(this.aa)&&(a=a.substr(this.aa.length)),a=await this.Ob(a),URL.createObjectURL(new Blob([a],{type:"application/javascript"}))):a}async cf(a){const c=a.filename;switch(a.as){case "text":return await this.Ie(c);case "buffer":return await this.Ob(c);default:throw Error("unsupported type");
}}zd(a){const c=window.cordova.file.applicationDirectory+"www/"+a;return new Promise((d,e)=>{window.resolveLocalFileSystemURL(c,f=>{f.file(d,e)},e)})}async Ie(a){a=await this.zd(a);return await ka(a)}Hc(){if(ma.length&&!(8<=D)){D++;var a=ma.shift();this.Ue(a.filename,a.Ef,a.xf)}}Ob(a){return new Promise((c,d)=>{ma.push({filename:a,Ef:e=>{D--;this.Hc();c(e)},xf:e=>{D--;this.Hc();d(e)}});this.Hc()})}async Ue(a,c,d){try{const e=await this.zd(a),f=await la(e);c(f)}catch(e){d(e)}}Md(a){if("entered-fullscreen"===
a)b.Wb(!0),G(this.na);else if("exited-fullscreen"===a)b.Wb(!1),G(this.na);else if("object"===typeof a){const c=a.type;"wrapper-init-response"===c?(this.td(a),this.td=null):"extension-message"===c?this.sb("runtime","wrapper-extension-message",a):console.warn("Unknown wrapper message: ",a)}else console.warn("Unknown wrapper message: ",a)}kf(a){this.Ha({type:"extension-message",componentId:a.componentId,messageId:a.messageId,params:a.params||[],asyncId:a.asyncId})}Ha(a){this.pa()?window.chrome.webview.postMessage(JSON.stringify(a)):
"macos-wkwebview"===this.u&&window.webkit.messageHandlers.C3Wrapper.postMessage(JSON.stringify(a))}nf(){window.moveTo=(a,c)=>{this.Ha({type:"set-window-position",windowX:Math.ceil(a),windowY:Math.ceil(c)})};window.resizeTo=(a,c)=>{this.Ha({type:"set-window-size",windowWidth:Math.ceil(a),windowHeight:Math.ceil(c)})}}af(){return this.pa()?new Promise(a=>{this.td=a;this.Ha({type:"wrapper-init"})}):Promise.resolve()}async Te(){const a=[];for(const [c,d]of Object.entries(this.ta))a.push(this.Se(c,d));
await Promise.all(a)}async Se(a,c){if("object"===typeof c)this.ta[a]=new Blob([c.str],{type:c.type}),this.fc[a]=c.str;else{let d=await this.Xe(c);d||(d=this.Ve(c));this.ta[a]=d}}async Xe(a){try{return await (await fetch(a)).blob()}catch(c){return console.warn("Failed to fetch a data: URI. Falling back to a slower workaround. This is probably because the Content Security Policy unnecessarily blocked it. Allow data: URIs in your CSP to avoid this.",c),null}}Ve(a){a=this.mf(a);return this.Re(a.data,
a.Af)}mf(a){var c=a.indexOf(",");if(0>c)throw new URIError("expected comma in data: uri");var d=a.substring(c+1);c=a.substring(5,c).split(";");a=c[0]||"";const e=c[2];d="base64"===c[1]||"base64"===e?atob(d):decodeURIComponent(d);return{Af:a,data:d}}Re(a,c){var d=a.length;let e=d>>2,f=new Uint8Array(d),g=new Uint32Array(f.buffer,0,e),h,k;for(k=h=0;h<e;++h)g[h]=a.charCodeAt(k++)|a.charCodeAt(k++)<<8|a.charCodeAt(k++)<<16|a.charCodeAt(k++)<<24;for(d&=3;d--;)f[k]=a.charCodeAt(k),++k;return new Blob([f],
{type:c})}};"use strict";const H=self.ba,Ba=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),I={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},Ca={dispatchUserScriptEvent:!0},Da={dispatchRuntimeEvent:!0};function Ea(b){return new Promise((a,c)=>{const d=document.createElement("link");d.onload=()=>a(d);d.onerror=e=>c(e);d.rel="stylesheet";d.href=b;document.head.appendChild(d)})}function Fa(b){return new Promise((a,c)=>{const d=new Image;d.onload=()=>a(d);d.onerror=e=>c(e);d.src=b})}
async function J(b){b=URL.createObjectURL(b);try{return await Fa(b)}finally{URL.revokeObjectURL(b)}}function Ga(b){return new Promise((a,c)=>{let d=new FileReader;d.onload=e=>a(e.target.result);d.onerror=e=>c(e);d.readAsText(b)})}
async function Ha(b,a,c){if(!/firefox/i.test(navigator.userAgent))return await J(b);var d=await Ga(b);d=(new DOMParser).parseFromString(d,"image/svg+xml");const e=d.documentElement;if(e.hasAttribute("width")&&e.hasAttribute("height")){const f=e.getAttribute("width"),g=e.getAttribute("height");if(!f.includes("%")&&!g.includes("%"))return await J(b)}e.setAttribute("width",a+"px");e.setAttribute("height",c+"px");d=(new XMLSerializer).serializeToString(d);b=new Blob([d],{type:"image/svg+xml"});return await J(b)}
function Ia(b){do{if(b.parentNode&&b.hasAttribute("contenteditable"))return!0;b=b.parentNode}while(b);return!1}const Ja=new Set(["input","textarea","datalist","select"]),Ka=new Set(["canvas","body","html"]);function K(b){b.target.tagName&&Ka.has(b.target.tagName.toLowerCase())&&b.preventDefault()}function La(b){b.target.tagName&&b.target.classList.contains("c3htmlwrap")&&b.preventDefault()}function Ma(b){(b.metaKey||b.ctrlKey)&&b.preventDefault()}
self.C3_GetSvgImageSize=async function(b){b=await J(b);if(0<b.width&&0<b.height)return[b.width,b.height];b.style.position="absolute";b.style.left="0px";b.style.top="0px";b.style.visibility="hidden";document.body.appendChild(b);const a=b.getBoundingClientRect();document.body.removeChild(b);return[a.width,a.height]};self.C3_RasterSvgImageBlob=async function(b,a,c,d,e){b=await Ha(b,a,c);const f=document.createElement("canvas");f.width=d;f.height=e;f.getContext("2d").drawImage(b,0,0,a,c);return f};
let Na=!1;document.addEventListener("pause",()=>Na=!0);document.addEventListener("resume",()=>Na=!1);function xa(b){b.addEventListener("selectstart",K);b.addEventListener("gesturehold",K);b.addEventListener("pointerdown",K)}function ya(b){b.addEventListener("selectstart",La);b.addEventListener("gesturehold",La);b.addEventListener("touchstart",La)}function za(b){b.Vd=!0;b.fd=b.j.qa();b.Db=b.j.ha()}
function G(b){if(!b.la){var a=H.pb();a&&"any"!==b.pd&&Oa(b);m(b,"fullscreenchange",{isFullscreen:a,innerWidth:b.qa(),innerHeight:b.ha()})}}async function Pa(b){await Promise.all(b.webfonts.map(async a=>{a=new FontFace(a.name,`url('${a.url}')`);document.fonts.add(a);await a.load()}))}
async function Ra(b){var a=b.imageBitmapOpts;b=await self.C3_RasterSvgImageBlob(b.blob,b.imageWidth,b.imageHeight,b.surfaceWidth,b.surfaceHeight);a=a?await createImageBitmap(b,a):await createImageBitmap(b);return{imageBitmap:a,transferables:[a]}}async function Sa(b){return await self.C3_GetSvgImageSize(b.blob)}function Ta(b){window.c3_postToMessagePort&&(b.from="runtime",window.c3_postToMessagePort(b))}
function Ua(b){self.setTimeout(()=>{b.Ud=!0},1E3);"cordova"===b.j.u?(document.addEventListener("pause",()=>Va(b,!0)),document.addEventListener("resume",()=>Va(b,!1))):document.addEventListener("visibilitychange",()=>Va(b,"hidden"===document.visibilityState));b.kc=!("hidden"!==document.visibilityState&&!Na);return{isSuspended:b.kc}}
function Wa(b){b.Qd||(b.Qd=!0,window.addEventListener("deviceorientation",a=>{b.la||m(b,"deviceorientation",{absolute:!!a.absolute,alpha:a.alpha||0,beta:a.beta||0,gamma:a.gamma||0,timeStamp:a.timeStamp,webkitCompassHeading:a.webkitCompassHeading,webkitCompassAccuracy:a.webkitCompassAccuracy},I)}),window.addEventListener("deviceorientationabsolute",a=>{b.la||m(b,"deviceorientationabsolute",{absolute:!!a.absolute,alpha:a.alpha||0,beta:a.beta||0,gamma:a.gamma||0,timeStamp:a.timeStamp},I)}))}
function Xa(b){b.Pd||(b.Pd=!0,window.addEventListener("devicemotion",a=>{if(!b.la){var c=null,d=a.acceleration;d&&(c={x:d.x||0,y:d.y||0,z:d.z||0});d=null;var e=a.accelerationIncludingGravity;e&&(d={x:e.x||0,y:e.y||0,z:e.z||0});e=null;var f=a.rotationRate;f&&(e={alpha:f.alpha||0,beta:f.beta||0,gamma:f.gamma||0});m(b,"devicemotion",{acceleration:c,accelerationIncludingGravity:d,rotationRate:e,interval:a.interval,timeStamp:a.timeStamp},I)}}))}async function Ya(b){await Ea(b.url)}
function Za(b,a){b.Xd=a.message;-1===b.Wc&&(b.Wc=setTimeout(()=>{b.Wc=-1;const c=document.getElementById("exportToVideoMessage");c&&(c.textContent=b.Xd)},250))}function $a(b,a){console.warn("[Construct] Fullscreen request failed: ",a);m(b,"fullscreenerror",{isFullscreen:H.pb(),innerWidth:b.qa(),innerHeight:b.ha()})}
function Va(b,a){b.kc!==a&&((b.kc=a)?b.j.Gc():b.j.Rc(),m(b,"visibilitychange",{hidden:a}),!a&&b.j.qb()&&(b=()=>{document.scrollingElement.scrollTop=0;document.scrollingElement.scrollLeft=0},setTimeout(b,50),setTimeout(b,100),setTimeout(b,250),setTimeout(b,500)))}
function ab(b,a,c){"Backspace"===c.key&&K(c);if(b.j.pa()){var d=["r","p","f","g","u"];(["F3","F5","F7"].includes(c.key)||c.ctrlKey&&d.includes(c.key))&&c.preventDefault()}b.la||(d=Ba.get(c.code)||c.code,n(b,a,{code:d,key:c.key,which:c.which,repeat:c.repeat,altKey:c.altKey,ctrlKey:c.ctrlKey,metaKey:c.metaKey,shiftKey:c.shiftKey,timeStamp:c.timeStamp},I))}
function L(b,a,c,d){b.la||c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents||c.originalEvent&&c.originalEvent.sourceCapabilities&&c.originalEvent.sourceCapabilities.firesTouchEvents||n(b,a,{button:c.button,buttons:c.buttons,clientX:c.clientX,clientY:c.clientY+b.Da,pageX:c.pageX,pageY:c.pageY+b.Da,movementX:c.movementX||0,movementY:c.movementY||0,timeStamp:c.timeStamp},d)}
function M(b,a,c){if(!b.la){var d=0;"mouse"===c.pointerType&&(d=b.hd);n(b,a,{pointerId:c.pointerId,pointerType:c.pointerType,button:c.button,buttons:c.buttons,lastButtons:d,clientX:c.clientX,clientY:c.clientY+b.Da,pageX:c.pageX,pageY:c.pageY+b.Da,movementX:c.movementX||0,movementY:c.movementY||0,width:c.width||0,height:c.height||0,pressure:c.pressure||0,tangentialPressure:c.tangentialPressure||0,tiltX:c.tiltX||0,tiltY:c.tiltY||0,twist:c.twist||0,timeStamp:c.timeStamp},I);"mouse"===c.pointerType&&
(b.hd=c.buttons)}}function bb(b,a,c){document.body.style.position="";document.body.style.overflow="";document.body.style.transform="";b.Da=0;if(0<c){var d=document.activeElement;d&&(d=d.getBoundingClientRect(),a=(d.top+d.bottom)/2-(a-c)/2,a>c&&(a=c),0>a&&(a=0),0<a&&(document.body.style.position="absolute",document.body.style.overflow="visible",document.body.style.transform=`translateY(${-a}px)`,b.Da=a))}}
function cb(b,a,c,d){const e=b.qa(),f=b.ha();b.ib=-1;e!=a||f!=c?m(b,"window-resize",{innerWidth:e,innerHeight:f,devicePixelRatio:window.devicePixelRatio,isFullscreen:H.pb()}):10>d&&db(b,e,f,d+1)}function db(b,a,c,d){-1!==b.ib&&clearTimeout(b.ib);b.ib=setTimeout(()=>cb(b,a,c,d),48)}
function Oa(b){b=b.pd;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(b).catch(a=>console.warn("[Construct] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(b):screen.webkitLockOrientation?a=screen.webkitLockOrientation(b):screen.mozLockOrientation?a=screen.mozLockOrientation(b):screen.msLockOrientation&&(a=screen.msLockOrientation(b));a||console.warn("[Construct] Failed to lock orientation")}catch(a){console.warn("[Construct] Failed to lock orientation: ",
a)}}function eb(b){return!b||b===document||b===window||b===document.body||"canvas"===b.tagName.toLowerCase()}
H.xa(class extends self.Qa{constructor(b){super(b,"runtime");this.Vd=!1;this.ib=-1;this.pd="any";this.kc=this.Pd=this.Qd=!1;this.qc=document.createElement("div");this.qc.className="c3-screen-reader-text";this.qc.setAttribute("aria-live","polite");document.body.appendChild(this.qc);this.Ka=null;this.la=!1;this.Xd="";this.Wc=-1;this.Ud=!1;this.fd=b.qa();this.Db=b.ha();this.Da=this.Mb=0;b.B("runtime","invoke-download",c=>{const d=c.url;c=c.filename;const e=document.createElement("a"),f=document.body;
e.textContent=c;e.href=d;e.download=c;f.appendChild(e);e.click();f.removeChild(e)});b.B("runtime","load-webfonts",c=>Pa(c));b.B("runtime","raster-svg-image",c=>Ra(c));b.B("runtime","get-svg-image-size",c=>Sa(c));b.B("runtime","set-target-orientation",c=>{this.pd=c.targetOrientation});b.B("runtime","register-sw",()=>{window.C3_RegisterSW&&window.C3_RegisterSW()});b.B("runtime","post-to-debugger",c=>Ta(c));b.B("runtime","go-to-script",c=>Ta(c));b.B("runtime","before-start-ticking",()=>Ua(this));b.B("runtime",
"debug-highlight",c=>{if(c.show){this.Ka||(this.Ka=document.createElement("div"),this.Ka.id="inspectOutline",document.body.appendChild(this.Ka));var d=this.Ka;d.style.display="";d.style.left=c.left-1+"px";d.style.top=c.top-1+"px";d.style.width=c.width+2+"px";d.style.height=c.height+2+"px";d.textContent=c.name}else this.Ka&&(this.Ka.style.display="none")});b.B("runtime","enable-device-orientation",()=>Wa(this));b.B("runtime","enable-device-motion",()=>Xa(this));b.B("runtime","add-stylesheet",c=>Ya(c));
b.B("runtime","script-create-worker",c=>{const d=c.port2;(new Worker(c.url,c.opts)).postMessage({type:"construct-worker-init",port2:d},[d])});b.B("runtime","alert",c=>this.Mc(c));b.B("runtime","screen-reader-text",c=>{var d=c.type;"create"===d?(d=document.createElement("p"),d.id="c3-sr-"+c.id,d.textContent=c.text,this.qc.appendChild(d)):"update"===d?(d=document.getElementById("c3-sr-"+c.id))?d.textContent=c.text:console.warn(`[Construct] Missing screen reader text with id ${c.id}`):"release"===d?
(d=document.getElementById("c3-sr-"+c.id))?d.remove():console.warn(`[Construct] Missing screen reader text with id ${c.id}`):console.warn(`[Construct] Unknown screen reader text update '${d}'`)});b.B("runtime","hide-cordova-splash",()=>{navigator.splashscreen&&navigator.splashscreen.hide&&navigator.splashscreen.hide()});b.B("runtime","set-exporting-to-video",c=>{this.la=!0;const d=document.createElement("h1");d.id="exportToVideoMessage";d.textContent=c.message;document.body.prepend(d);document.body.classList.add("exportingToVideo");
this.j.Cd().style.display="";this.j.Pe(c.duration)});b.B("runtime","export-to-video-progress",c=>Za(this,c));b.B("runtime","exported-to-video",c=>{window.wf({type:"exported-video",arrayBuffer:c.arrayBuffer,contentType:c.contentType,time:c.time})});b.B("runtime","exported-to-image-sequence",c=>{window.wf({type:"exported-image-sequence",blobArr:c.blobArr,time:c.time,gif:c.gif})});const a=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",c=>{const d=c.target;a.has(d.tagName.toLowerCase())||
Ia(d)||c.preventDefault()});window.addEventListener("selectstart",K);window.addEventListener("gesturehold",K);window.addEventListener("touchstart",K,{passive:!1});window.addEventListener("pointerdown",K,{passive:!1});this.hd=0;window.addEventListener("mousedown",c=>{1===c.button&&c.preventDefault()});window.addEventListener("mousewheel",Ma,{passive:!1});window.addEventListener("wheel",Ma,{passive:!1});window.addEventListener("resize",()=>{a:{if(!this.la&&this.Vd){var c=this.qa();var d=this.ha();if(this.j.Dd()){if(this.Ud){if(this.fd===
c&&d<this.Db){this.Mb=this.Db-d;bb(this,this.Db,this.Mb);c=void 0;break a}0<this.Mb&&(this.Mb=0,bb(this,d,this.Mb))}this.fd=c;this.Db=d}m(this,"window-resize",{innerWidth:c,innerHeight:d,devicePixelRatio:window.devicePixelRatio,isFullscreen:H.pb()});this.j.qb()&&(-1!==this.ib&&clearTimeout(this.ib),cb(this,c,d,0))}c=void 0}return c});window.addEventListener("fullscreenchange",()=>G(this));window.addEventListener("webkitfullscreenchange",()=>G(this));window.addEventListener("mozfullscreenchange",()=>
G(this));window.addEventListener("fullscreenerror",c=>$a(this,c));window.addEventListener("webkitfullscreenerror",c=>$a(this,c));window.addEventListener("mozfullscreenerror",c=>$a(this,c));if(b.qb()){if(window.visualViewport){let c=Infinity;window.visualViewport.addEventListener("resize",()=>{const d=window.visualViewport.height;d>c&&(document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0);c=d})}else window.addEventListener("focusout",()=>{{const e=document.activeElement;if(e){var c=
e.tagName.toLowerCase();var d=new Set("email number password search tel text url".split(" "));c="textarea"===c?!0:"input"===c?d.has(e.type.toLowerCase()||"text"):Ia(e)}else c=!1}c||(document.scrollingElement.scrollTop=0)});document.documentElement.setAttribute("ioswebview","")}this.bb=new Set;this.ic=new WeakSet;this.za=!1}wd(){window.addEventListener("focus",()=>{m(this,"window-focus",null,Da)});window.addEventListener("blur",()=>{try{var a=window.parent&&window.parent.document.hasFocus()}catch(c){a=
!1}m(this,"window-blur",{parentHasFocus:a},Da);this.hd=0});window.addEventListener("focusin",a=>{a=a.target;(Ja.has(a.tagName.toLowerCase())||Ia(a))&&m(this,"keyboard-blur",null,Da)});window.addEventListener("keydown",a=>ab(this,"keydown",a));window.addEventListener("keyup",a=>ab(this,"keyup",a));window.addEventListener("mousedown",a=>L(this,"mousedown",a,Ca));window.addEventListener("mousemove",a=>L(this,"mousemove",a,Ca));window.addEventListener("mouseup",a=>L(this,"mouseup",a,Ca));window.addEventListener("dblclick",
a=>L(this,"dblclick",a,I));window.addEventListener("wheel",a=>{this.la||m(this,"wheel",{clientX:a.clientX,clientY:a.clientY+this.Da,pageX:a.pageX,pageY:a.pageY+this.Da,deltaX:a.deltaX,deltaY:a.deltaY,deltaZ:a.deltaZ,deltaMode:a.deltaMode,timeStamp:a.timeStamp},I)});window.addEventListener("pointerdown",a=>{window!==window.top&&window.focus();eb(a.target)&&document.activeElement&&!eb(document.activeElement)&&document.activeElement.blur();M(this,"pointerdown",a)});this.j.ea&&"undefined"!==typeof window.onpointerrawupdate&&
self===self.top?window.addEventListener("pointerrawupdate",a=>{M(this,"pointermove",a)}):window.addEventListener("pointermove",a=>M(this,"pointermove",a));window.addEventListener("pointerup",a=>M(this,"pointerup",a));window.addEventListener("pointercancel",a=>M(this,"pointercancel",a));const b=()=>this.Qc();window.addEventListener("pointerup",b,!0);window.addEventListener("touchend",b,!0);window.addEventListener("click",b,!0);window.addEventListener("keydown",b,!0);window.addEventListener("gamepadconnected",
b,!0);this.j.Ke()&&!this.j.Dd()&&navigator.virtualKeyboard&&(navigator.virtualKeyboard.overlaysContent=!0,navigator.virtualKeyboard.addEventListener("geometrychange",()=>{bb(this,this.ha(),navigator.virtualKeyboard.boundingRect.height)}));this.j.qb()&&(document.scrollingElement.scrollTop=0,document.scrollingElement.scrollLeft=0)}qa(){return this.j.qa()}ha(){return this.j.ha()}Qc(){var b=[...this.bb];this.bb.clear();if(!this.za)for(const a of b)(b=a.play())&&b.catch(()=>{this.ic.has(a)||this.bb.add(a)})}Ga(b){if("function"!==
typeof b.play)throw Error("missing play function");this.ic.delete(b);let a;try{a=b.play()}catch(c){this.bb.add(b);return}a&&a.catch(()=>{this.ic.has(b)||this.bb.add(b)})}Sa(b){this.bb.delete(b);this.ic.add(b)}Tb(b){this.za=!!b}Mc(b){alert(b.message)}});"use strict";
async function va(b){if(b.qf)throw Error("already initialised");b.qf=!0;var a=b.Ba.Jc(("playable-ad"===b.Ba.u?b.Ba.hb:"")+"dispatchworker.js");b.Vc=await b.Ba.wc(a,b.ub,{name:"DispatchWorker"});a=new MessageChannel;b.ad=a.port1;b.Vc.postMessage({type:"_init","in-port":a.port2},[a.port2]);b.kd=await Aa(b)}function wa(b){return[b.ad,b.kd]}
async function Aa(b){const a=b.ce.length;var c=b.Ba.Jc(("playable-ad"===b.Ba.u?b.Ba.hb:"")+"jobworker.js");c=await b.Ba.wc(c,b.ub,{name:"JobWorker"+a});const d=new MessageChannel,e=new MessageChannel;b.Vc.postMessage({type:"_addJobWorker",port:d.port1},[d.port1]);c.postMessage({type:"init",number:a,"dispatch-port":d.port2,"output-port":e.port2},[d.port2,e.port2]);b.ce.push(c);return e.port1}
self.Ne=class{constructor(b){this.Ba=b;this.ub=b.aa;this.ub="preview"===b.u?this.ub+"workers/":this.ub+b.hb;this.sf=Math.min(navigator.hardwareConcurrency||2,16);this.Vc=null;this.ce=[];this.kd=this.ad=null}};"use strict";window.C3_Is_Supported&&(window.c3_runtimeInterface=new self.ba({Ff:!0,Gf:"workermain.js",jb:["scripts/c3runtime.js"],tc:[],ud:"",Cf:"scripts/",uc:[],re:"html5"}));"use strict";function fb(b,a,c){gb(b,a,URL.createObjectURL(new Blob([c.html],{type:"text/html"})));b.bc=!0}
function gb(b,a,c){a.src&&a.src.startsWith("blob:")&&b.bc&&URL.revokeObjectURL(a.src);a.src=c}
self.ba.xa(class extends self.mb{constructor(b){super(b,"iframe");this.bc=!1;x(this,"navigate-url",(a,c)=>{gb(this,a,c.url);this.bc=!1});x(this,"display-html",(a,c)=>fb(this,a,c))}Pb(b,a){b=document.createElement("iframe");b.style.position="absolute";b.style.border="none";var c=navigator.userAgent;/iphone|ipad|ipod/i.test(c)&&(c=/(iphone\s+os|ipad[^)]*os)\s+([0-9_]+)/i.exec(c),c=parseInt(c[c.length-1]),12>=c||isNaN(c))&&(b.setAttribute("noresize","noresize"),b.setAttribute("scrolling","no"));a.isVisible||
(b.style.display="none");a.id&&(b.id=a.id);a.allow&&(b.setAttribute("allow",a.allow),a.allow.includes("fullscreen")&&b.setAttribute("allowfullscreen",""));a.enableSandbox&&b.setAttribute("sandbox",a.sandbox);a.url?b.src=a.url:a.html&&fb(this,b,a);return b}Ua(){}Bd(b){gb(this,b,"");this.bc=!1}});"use strict";function N(b){b.stopPropagation()}
self.ba.xa(class extends self.mb{constructor(b){super(b,"button")}Pb(b,a){const c=document.createElement("input");var d=c;a.isCheckbox?(c.type="checkbox",d=document.createElement("label"),d.appendChild(c),d.appendChild(document.createTextNode("")),d.style.fontFamily="sans-serif",d.style.userSelect="none",d.style.webkitUserSelect="none",d.style.display="inline-block",d.style.color="black"):c.type="button";d.style.position="absolute";d.addEventListener("pointerdown",N);d.addEventListener("pointermove",
N);d.addEventListener("pointerrawupdate",N);d.addEventListener("pointerup",N);d.addEventListener("mousedown",N);d.addEventListener("mouseup",N);d.addEventListener("keydown",N);d.addEventListener("keyup",N);d.addEventListener("contextmenu",e=>e.preventDefault());c.addEventListener("click",()=>z(this,"click",b,{isChecked:c.checked}));a.id&&(c.id=a.id);a.className&&(c.className=a.className);this.Ua(d,a);return d}Ic(b){return"input"===b.tagName.toLowerCase()?b:b.firstChild}Ua(b,a){const c="input"===b.tagName.toLowerCase()?
b:b.firstChild;c.checked=a.isChecked;c.disabled=!a.isEnabled;b.title=a.title;b===c?c.value=a.text:b.lastChild.textContent=a.text}});"use strict";function O(b){b.stopPropagation()}function hb(b){13!==b.which&&27!==b.which&&b.stopPropagation()}
self.ba.xa(class extends self.mb{constructor(b){super(b,"text-input");x(this,"scroll-to-bottom",a=>{a.scrollTop=a.scrollHeight})}Pb(b,a){let c;const d=a.type;"textarea"===d?(c=document.createElement("textarea"),c.style.resize="none"):(c=document.createElement("input"),c.type=d);c.style.position="absolute";c.autocomplete="off";c.addEventListener("pointerdown",O);c.addEventListener("pointermove",O);c.addEventListener("pointerrawupdate",O);c.addEventListener("pointerup",O);c.addEventListener("mousedown",
O);c.addEventListener("mouseup",O);c.addEventListener("keydown",hb);c.addEventListener("keyup",hb);c.addEventListener("click",e=>{e.stopPropagation();z(this,"click",b)});c.addEventListener("dblclick",e=>{e.stopPropagation();z(this,"dblclick",b)});c.addEventListener("input",()=>w(this,"change",b,{text:c.value}));a.id&&(c.id=a.id);a.className&&(c.className=a.className);this.Ua(c,a);return c}Ua(b,a){b.value=a.text;b.placeholder=a.placeholder;b.title=a.title;b.disabled=!a.isEnabled;b.readOnly=a.isReadOnly;
b.spellcheck=a.spellCheck;a=a.maxLength;0>a?b.removeAttribute("maxlength"):b.setAttribute("maxlength",a)}});"use strict";
self.ba.xa(class extends self.Qa{constructor(b){super(b,"mouse");p(this,[["cursor",a=>{document.documentElement.style.cursor=a}],["request-pointer-lock",()=>{this.j.Cd().requestPointerLock()}],["release-pointer-lock",()=>{document.exitPointerLock()}]]);document.addEventListener("pointerlockchange",()=>{m(this,"pointer-lock-change",{"has-pointer-lock":!!document.pointerLockElement})});document.addEventListener("pointerlockerror",()=>{m(this,"pointer-lock-error",{"has-pointer-lock":!!document.pointerLockElement})})}});
"use strict";const ib=180/Math.PI;
async function jb(b,a){if(a.isiOSCordova||a.isSafari)b.mc=!0;b.qd=a.timeScaleMode;b.he=["equalpower","HRTF","soundfield"][a.panningModel];b.Td=["linear","inverse","exponential"][a.distanceModel];b.ie=a.refDistance;b.ge=a.maxDistance;b.ke=a.rolloffFactor;if(b.j.bd)b.mc=!0,b.g=new OfflineAudioContext({numberOfChannels:2,sampleRate:48E3,length:Math.ceil(48E3*b.j.Wd)});else{var c={latencyHint:a.latencyHint};b.ne||(c.sampleRate=48E3);if("undefined"!==typeof AudioContext)b.g=new AudioContext(c);else if("undefined"!==
typeof webkitAudioContext)b.g=new webkitAudioContext(c);else throw Error("Web Audio API not supported");kb(b);b.g.onstatechange=()=>{"running"!==b.g.state&&kb(b);m(b,"audiocontext-state",{audioContextState:b.g.state})}}b.Ya=b.g.createGain();b.Ya.connect(b.g.destination);c=a.listenerPos;b.$[0]=c[0];b.$[1]=c[1];b.$[2]=c[2];b.g.listener.setPosition(c[0],c[1],c[2]);b.g.listener.setOrientation(...b.ca);self.C3_GetAudioContextCurrentTime=()=>b.g.currentTime;try{await Promise.all(a.preloadList.map(d=>P(b,
d.originalUrl,d.url,d.type,!1)))}catch(d){console.error("[Construct] Preloading sounds failed: ",d)}return{sampleRate:b.g.sampleRate,audioContextState:b.g.state,outputLatency:b.g.outputLatency||0}}
async function nb(b,a){var c=a.originalUrl,d=a.url;const e=a.type,f=a.isMusic,g=a.tags,h=a.isLooping,k=a.vol,l=a.pos,q=a.panning,r=a.stereoPan;let t=a.off;0<t&&!a.trueClock&&(b.g.getOutputTimestamp?(a=b.g.getOutputTimestamp(),t=t-a.performanceTime/1E3+a.contextTime):t=t-performance.now()/1E3+b.g.currentTime);b.de=g.slice(0);ob(b,g);try{b.R=await pb(b,c,d,e,g,f);if(q){Q(b.R,!0);var u=b.R,B=q.innerAngle,sa=q.outerAngle,ta=q.outerGain;if(u.Bb){qb(u,q.x,q.y,q.z,q.angle);var E=self.lb.Qe;u.ua[0]!==E(B)&&
(u.ua[0]=E(B),u.F.coneInnerAngle=E(B));u.ua[1]!==E(sa)&&(u.ua[1]=E(sa),u.F.coneOuterAngle=E(sa));u.ua[2]!==ta&&(u.ua[2]=ta,u.F.coneOuterGain=ta)}q.hasOwnProperty("uid")&&(b.R.sa=q.uid)}else"number"===typeof r&&0!==r?(R(b.R,!0),rb(b.R,r)):(Q(b.R,!1),R(b.R,!1));b.R.Play(h,k,l,t)}catch(Fb){console.error("[Construct] Audio: error starting playback: ",Fb);return}finally{c=g.join(" ");d=b.Jb.get(c);if(!d)throw Error("expected pending tag");d.vd--;0===d.vd&&(d.resolve(),b.Jb.delete(c))}v(b)}
async function sb(b,a){var c=a.tags;const d=a.vol,e=a.duration;a=a.stopOnEnd;await tb(b,c);for(const h of S(b,c))if(!h.ya){c=h.G.gain;c.cancelScheduledValues(0);var f=h.v.g.currentTime,g=f+e;c.setValueAtTime(c.value,f);c.linearRampToValueAtTime(d,g);h.Pa=d;h.$a=g;h.me=a}T(b)}async function ub(b,a){const c=a.tags;a=a.rate;await tb(b,c);for(const d of S(b,c))d.ma!==a&&(d.ma=a,d.Ia())}async function vb(b,a){const c=a.tags;a=a.pos;await tb(b,c);for(const d of S(b,c))d.Cc(a)}
async function wb(b,a){const c=a.originalUrl,d=a.url,e=a.type;a=a.isMusic;try{await pb(b,c,d,e,"",a)}catch(f){console.error("[Construct] Audio: error preloading: ",f)}}async function xb(b,a){if(a=await P(b,"",a.url,a.type,a.isMusic,!0))a.l(),a=b.ja.indexOf(a),-1!==a&&b.ja.splice(a,1)}
async function yb(b,a){const c=a.type;var d=a.hasOwnProperty("tags")?a.tags:[a.tag];const e=a.params;let f;if("convolution"===c)try{f=await P(b,a.bufferOriginalUrl,a.bufferUrl,a.bufferType,!1)}catch(k){console.log("[Construct] Audio: error loading convolution: ",k);return}for(const k of d){if("filter"===c)d=new self.xe(b,...e);else if("delay"===c)d=new self.ve(b,...e);else if("convolution"===c){var g=d=new self.ue(b,f.ia,...e),h=a.bufferType;g.Rd=a.bufferOriginalUrl;g.Sd=h}else if("flanger"===c)d=
new self.ye(b,...e);else if("phaser"===c)d=new self.Ae(b,...e);else if("gain"===c)d=new self.ze(b,...e);else if("stereopan"===c)d=new self.Ce(b,...e);else if("tremolo"===c)d=new self.De(b,...e);else if("ringmod"===c)d=new self.Be(b,...e);else if("distortion"===c)d=new self.we(b,...e);else if("compressor"===c)d=new self.te(b,...e);else if("analyser"===c)d=new self.se(b,...e);else throw Error("invalid effect type");g=b;h=k;h=h.toLowerCase();let l=g.ka.get(h);l||(l=[],g.ka.set(h,l));d.ae=l.length;d.od=
h;l.push(d);zb(g,h)}Ab(b)}
async function Bb(b,a){const c=a.saveLoadMode;if(3!==c){var d=[];for(var e of b.H)e.Ea()&&1===c||!e.Ea()&&2===c?d.push(e):e.l();b.H=d}for(const f of b.ka.values())for(const g of f)g.l();b.ka.clear();b.rc=a.timeScale;b.Xc=a.gameTime;d=a.listenerPos;b.$[0]=d[0];b.$[1]=d[1];b.$[2]=d[2];b.g.listener.setPosition(d[0],d[1],d[2]);d=a.listenerOrientation;if(Array.isArray(d)){for(e=0;6>e;++e)b.ca[e]=d[e];b.g.listener.setOrientation(...b.ca)}b.za=a.isSilent;b.j.Tb(b.za);b.hc=a.masterVolume;b.Ya.gain.value=
b.hc;d=[];for(const f of Object.values(a.effects))d.push(Promise.all(f.map(g=>yb(b,g))));await Promise.all(d);await Promise.all(a.playing.map(f=>Cb(b,f,c)));T(b)}
async function Db(b,a){try{const c=b.g.suspend(a.time);b.$d?b.g.resume():(b.g.startRendering().then(d=>{const e=[];for(let f=0,g=d.numberOfChannels;f<g;++f){const h=d.getChannelData(f);e.push(h.buffer)}b.j.sb("runtime","offline-audio-render-completed",{duration:d.duration,length:d.length,numberOfChannels:d.numberOfChannels,sampleRate:d.sampleRate,channelData:e},null,e)}).catch(d=>Eb(d)),b.$d=!0);await c}catch(c){Eb(c)}}
function kb(b){b.$b||(b.$c=!1,window.addEventListener("pointerup",b.Ca,!0),window.addEventListener("touchend",b.Ca,!0),window.addEventListener("click",b.Ca,!0),window.addEventListener("keydown",b.Ca,!0),b.$b=!0)}
async function P(b,a,c,d,e,f){for(var g of b.ja)if(g.ob()===c)return await Gb(g),g;if(f)return null;if(e&&(b.mc||b.Zd)){f=0;for(let h=0,k=b.ja.length;h<k;++h)g=b.ja[h],b.ja[f]=g,g.Ea()?g.l():++f;b.ja.length=f}f="audio/webm; codecs=opus"===d&&!b.ne;e&&f&&(b.Zd=!0);c=!e||b.mc||f?new self.Ge(b,a,c,d,e,f):new self.Ee(b,a,c,d,e);b.ja.push(c);await Gb(c);b.fe.has(a)||(m(b,"buffer-metadata",{originalUrl:a,duration:c.ga()}),b.fe.add(a));return c}
function Hb(b,a){return b===a||b.normalize().toLowerCase()===a.normalize().toLowerCase()}function Ib(b,a){return(a=b.ka.get(a.toLowerCase()))?a[0].N():b.fa()}function zb(b,a){a=a.toLowerCase();let c=b.fa();var d=b.ka.get(a);if(d&&d.length){c=d[0].N();for(let f=0,g=d.length;f<g;++f){var e=d[f];f+1===g?e.U(b.fa()):e.U(d[f+1].N())}}for(const f of Jb(b,a))d=c,e=f.da||f.F||f.G,e.disconnect(),e.connect(d);b.Ma&&b.gd===a&&(b.Ma.disconnect(),b.Ma.connect(c))}
function*Jb(b,a){if(a)for(const c of b.H)Hb(0<c.oa.length?c.oa[0]:"",a)&&(yield c);else b.R&&!b.R.O()&&(yield b.R)}function Kb(b,a,c){return c?b.j.pf(a).then(d=>{const e=b.g.createBuffer(1,d.length,48E3);e.getChannelData(0).set(d);return e}):new Promise((d,e)=>{b.g.decodeAudioData(a,d,e)})}function Lb(b,a){let c=0;for(let d=0,e=b.H.length;d<e;++d){const f=b.H[d];b.H[c]=f;f.P===a?f.l():++c}b.H.length=c}
function*S(b,a){if(0<a.length)for(const d of b.H){a:{b=d.oa;var c=a;for(const e of c){c=!1;for(const f of b)if(Hb(f,e)){c=!0;break}if(!c){b=!1;break a}}b=!0}b&&(yield d)}else b.R&&!b.R.O()&&(yield b.R)}async function pb(b,a,c,d,e,f){for(const g of b.H)if(g.ob()===c&&(g.vc()||f))return g.oa=e,g;a=await P(b,a,c,d,f);e="html5"===a.Tc?new self.Fe(a.v,a,e):new self.He(a.v,a,e);b.H.push(e);return e}
function ob(b,a){a=a.join(" ");let c=b.Jb.get(a);if(!c){let d=null;c={vd:0,promise:new Promise(e=>d=e),resolve:d};b.Jb.set(a,c)}c.vd++}function tb(b,a){return(b=b.Jb.get((0===a.length?b.de:a).join(" ")))?b.promise:Promise.resolve()}function T(b){if(0<b.Wa.size)v(b);else for(const a of b.H)if(!a.I&&!a.O()){v(b);break}}function Mb(b,a,c,d){m(b,"trigger",{type:a,tags:c,aiid:d})}function Ab(b){b.cd||(b.cd=!0,Promise.resolve().then(()=>Nb(b)))}
function Nb(b){const a={};for(const [c,d]of b.ka)a[c]=d.map(e=>e.nb());m(b,"fxstate",{fxstate:a});b.cd=!1}
async function Cb(b,a,c){if(3!==c){var d=a.bufferOriginalUrl,e=a.bufferUrl,f=a.bufferType,g=a.isMusic,h=a.tags,k=a.isLooping,l=a.volume,q=a.playbackTime;if(!g||1!==c)if(g||2!==c){c=null;try{c=await pb(b,d,e,f,h,g)}catch(r){console.error("[Construct] Audio: error loading audio state: ",r);return}b=c;(d=a.pan)?(Q(b,!0),e=b.F,f=d.pos,b.eb[0]=f[0],b.eb[1]=f[1],b.eb[2]=f[2],f=d.orient,b.cb[0]=f[0],b.cb[1]=f[1],b.cb[2]=f[2],e.setPosition(...b.eb),e.setOrientation(...b.cb),b.ua[0]=d.cia,b.ua[1]=d.coa,b.ua[2]=
d.cog,e.coneInnerAngle=d.cia,e.coneOuterAngle=d.coa,e.coneOuterGain=d.cog,b.sa=d.uid):Q(b,!1);b=c;d=a.stereoPan;"number"!==typeof d?R(b,!1):(R(b,!0),rb(b,d));c.Play(k,l,q,0);a.isPlaying||c.rb();c.Lc(a)}}}function Eb(b){console.error("[Audio] Offline rendering error: ",b)}
self.lb=class extends self.Qa{constructor(b){super(b,"audio");this.Ya=this.g=null;this.$b=this.$c=!1;this.Ca=()=>{if(!this.$c){var a=this.g;"suspended"===a.state&&a.resume&&a.resume();var c=a.createBuffer(1,220,22050),d=a.createBufferSource();d.buffer=c;d.connect(a.destination);d.start(0);"running"===a.state&&this.$b&&(this.$c=!0,window.removeEventListener("pointerup",this.Ca,!0),window.removeEventListener("touchend",this.Ca,!0),window.removeEventListener("click",this.Ca,!0),window.removeEventListener("keydown",
this.Ca,!0),this.$b=!1)}};this.ja=[];this.H=[];this.R=null;this.de=[];this.fe=new Set;this.ee=-1;this.Jb=new Map;this.hc=1;this.za=!1;this.qd=0;this.rc=1;this.Xc=0;this.he="HRTF";this.Td="inverse";this.ie=600;this.ge=1E4;this.ke=1;this.$=[0,0,0];this.ca=[0,0,-1,0,1,0];this.Zd=this.mc=!1;this.ne=this.j.Le();this.ka=new Map;this.Wa=new Set;this.$d=this.cd=!1;this.gd="";this.Ma=null;self.C3Audio_OnMicrophoneStream=(a,c)=>{this.Ma&&this.Ma.disconnect();this.gd=c.toLowerCase();this.Ma=this.g.createMediaStreamSource(a);
this.Ma.connect(Ib(this,this.gd))};this.Zb=null;self.C3Audio_GetOutputStream=()=>{this.Zb||(this.Zb=this.g.createMediaStreamDestination(),this.Ya.connect(this.Zb));return this.Zb.stream};self.C3Audio_DOMInterface=this;p(this,[["create-audio-context",a=>jb(this,a)],["play",a=>nb(this,a)],["stop",a=>{a=a.tags;for(const c of S(this,a))c.Fa()}],["stop-all",()=>{for(const a of this.H)a.Fa()}],["set-paused",a=>{const c=a.tags;a=a.paused;for(const d of S(this,c))a?d.rb():d.Sb();T(this)}],["set-volume",a=>
{const c=a.tags;a=a.vol;for(const d of S(this,c))U(d,a)}],["fade-volume",a=>sb(this,a)],["set-master-volume",a=>{this.hc=a.vol;this.Ya.gain.value=this.hc}],["set-muted",a=>{const c=a.tags;a=a.isMuted;for(const d of S(this,c))Ob(d,a)}],["set-silent",a=>{this.za=a.isSilent;this.j.Tb(this.za);for(const c of this.H)c.Xb()}],["set-looping",a=>{const c=a.tags;a=a.isLooping;for(const d of S(this,c))d.Dc(a)}],["set-playback-rate",a=>ub(this,a)],["set-stereo-pan",a=>{const c=a.tags;a=a.p;for(const d of S(this,
c))R(d,!0),rb(d,a)}],["seek",a=>vb(this,a)],["preload",a=>wb(this,a)],["unload",a=>xb(this,a)],["unload-all",()=>{for(const a of this.ja)a.l();this.ja.length=0}],["set-suspended",a=>{a=a.isSuspended;!a&&this.g.resume&&this.g.resume();for(const c of this.H)c.Ec(a);a&&this.g.suspend&&this.g.suspend()}],["add-effect",a=>yb(this,a)],["set-effect-param",a=>{var c=a.tags;const d=a.index,e=a.param,f=a.value,g=a.ramp;a=a.time;for(const h of c)c=this.ka.get(h.toLowerCase()),!c||0>d||d>=c.length||c[d].Z(e,
f,g,a);Ab(this)}],["remove-effects",a=>{a=a.tags;for(const c of a){a=c.toLowerCase();const d=this.ka.get(a);if(!d||!d.length)break;for(const e of d)e.l();this.ka.delete(a);zb(this,a)}}],["tick",a=>{this.rc=a.timeScale;this.Xc=a.gameTime;this.ee=a.tickCount;if(0!==this.qd)for(var c of this.H)c.Ia();!(c=a.listenerPos)||this.$[0]===c[0]&&this.$[1]===c[1]&&this.$[2]===c[2]||(this.$[0]=c[0],this.$[1]=c[1],this.$[2]=c[2],this.g.listener.setPosition(c[0],c[1],c[2]));if((c=a.listenerOrientation)&&(this.ca[0]!==
c[0]||this.ca[1]!==c[1]||this.ca[2]!==c[2]||this.ca[3]!==c[3]||this.ca[4]!==c[4]||this.ca[5]!==c[5])){for(let d=0;6>d;++d)this.ca[d]=c[d];this.g.listener.setOrientation(...this.ca)}for(const d of a.instPans){a=d.uid;for(const e of this.H)e.sa===a&&qb(e,d.x,d.y,d.z,d.angle)}}],["load-state",a=>Bb(this,a)],["offline-render-audio",a=>Db(this,a)],["offline-render-finish",()=>{this.g.resume()}]])}V(){return this.g}fa(){return this.Ya}GetAudioContextExtern(){return this.V()}GetDestinationNodeExtern(){return this.fa()}Rb(){return this.za}Ga(b){this.j.Ga(b)}Sa(b){this.j.Sa(b)}Ta(){for(var b of this.Wa)b.Ta();
b=this.g.currentTime;for(var a of this.H)a.Ta(b);a=this.H.filter(c=>!c.I&&!c.O()).map(c=>c.nb());m(this,"state",{tickCount:this.ee,outputLatency:this.g.outputLatency||0,audioInstances:a,analysers:[...this.Wa].map(c=>({tag:c.od,index:c.ae,peak:c.fb,rms:c.je,binCount:c.m.frequencyBinCount,freqBins:c.Yd}))});0===a.length&&0===this.Wa.size&&this.ac&&(this.j.Nd(this.oe),this.ac=!1)}static Qe(b){return b*ib}static Ad(b){return Math.max(Math.min(Math.pow(10,b/20),1),0)}static Oe(b){return Math.log(Math.max(Math.min(b,
1),0))/Math.log(10)*20}};self.ba.xa(self.lb);"use strict";function Gb(b){b.ec||(b.ec=b.Kc());return b.ec}self.xd=class{constructor(b,a,c,d,e){this.v=b;this.uf=a;this.Oa=c;this.T=d;this.rf=e;this.Tc="";this.ec=null}l(){this.ec=this.v=null}Kc(){}V(){return this.v.V()}zc(){return this.uf}ob(){return this.Oa}yc(){return this.T}Ea(){return this.rf}ga(){}};"use strict";
self.Ee=class extends self.xd{constructor(b,a,c,d,e){super(b,a,c,d,e);this.Tc="html5";this.L=new Audio;this.L.crossOrigin="anonymous";this.L.autoplay=!1;this.L.preload="auto";this.Eb=this.Fb=null;this.L.addEventListener("canplaythrough",()=>!0);this.Ib=this.V().createGain();this.Hb=null;this.L.addEventListener("canplay",()=>{this.Fb&&(this.Fb(),this.Eb=this.Fb=null);!this.Hb&&this.L&&(this.Hb=this.V().createMediaElementSource(this.L),this.Hb.connect(this.Ib))});this.onended=null;this.L.addEventListener("ended",
()=>{if(this.onended)this.onended()});this.L.addEventListener("error",f=>{console.error(`[Construct] Audio '${this.Oa}' error: `,f);this.Eb&&(this.Eb(f),this.Eb=this.Fb=null)})}l(){Lb(this.v,this);this.Ib.disconnect();this.Ib=null;this.Hb.disconnect();this.Hb=null;this.L&&!this.L.paused&&this.L.pause();this.L=this.onended=null;super.l()}Kc(){return new Promise((b,a)=>{this.Fb=b;this.Eb=a;this.L.src=this.Oa})}W(){return this.L}ga(){return this.L.duration}};"use strict";
async function Pb(b){if(b.Ja)return b.Ja;var a=b.v.j;if("cordova"===a.u&&a.Ed(b.Oa)&&a.cc)b.Ja=await a.Ob(b.Oa);else{a=await fetch(b.Oa);if(!a.ok)throw Error(`error fetching audio data: ${a.status} ${a.statusText}`);b.Ja=await a.arrayBuffer()}}async function Qb(b){if(b.ia)return b.ia;b.ia=await Kb(b.v,b.Ja,b.tf);b.Ja=null}
self.Ge=class extends self.xd{constructor(b,a,c,d,e,f){super(b,a,c,d,e);this.Tc="webaudio";this.ia=this.Ja=null;this.tf=!!f}l(){Lb(this.v,this);this.ia=this.Ja=null;super.l()}async Kc(){try{await Pb(this),await Qb(this)}catch(b){console.error(`[Construct] Failed to load audio '${this.Oa}': `,b)}}ga(){return this.ia?this.ia.duration:0}};"use strict";let Rb=0;
function Q(b,a){a=!!a;b.Bb!==a&&(b.Bb=a,b.Bb?(R(b,!1),b.F||(b.F=b.V().createPanner(),b.F.panningModel=b.v.he,b.F.distanceModel=b.v.Td,b.F.refDistance=b.v.ie,b.F.maxDistance=b.v.ge,b.F.rolloffFactor=b.v.ke),b.G.disconnect(),b.G.connect(b.F),b.F.connect(b.fa())):(b.F.disconnect(),b.G.disconnect(),b.G.connect(b.fa())))}
function R(b,a){a=!!a;b.dc!==a&&(b.dc=a,b.dc?(Q(b,!1),b.da=b.V().createStereoPanner(),b.G.disconnect(),b.G.connect(b.da),b.da.connect(b.fa())):(b.da.disconnect(),b.da=null,b.G.disconnect(),b.G.connect(b.fa())))}function rb(b,a){b.dc&&b.nd!==a&&(b.da.pan.value=a,b.nd=a)}function U(b,a){b.Pa=a;b.G.gain.cancelScheduledValues(0);b.$a=-1;b.G.gain.value=b.Ac()}function Ob(b,a){a=!!a;b.ya!==a&&(b.ya=a,b.Xb())}
function qb(b,a,c,d,e){if(b.Bb){var f=b.eb,g=b.cb,h=Math.cos(e);e=Math.sin(e);if(f[0]!==a||f[1]!==c||f[2]!==d)f[0]=a,f[1]=c,f[2]=d,b.F.setPosition(...f);if(g[0]!==h||g[1]!==e||0!==g[2])g[0]=h,g[1]=e,g[2]=0,b.F.setOrientation(...g)}}function V(b){return b.dd?b.v.Xc:performance.now()/1E3}
self.yd=class{constructor(b,a,c){this.v=b;this.P=a;this.oa=c;this.Yb=Rb++;this.G=this.V().createGain();this.G.connect(this.fa());this.F=null;this.Bb=!1;this.eb=[0,0,0];this.cb=[0,0,0];this.ua=[0,0,0];this.da=null;this.dc=!1;this.nd=0;this.I=!0;this.Y=this.va=this.J=!1;this.Pa=1;this.ya=!1;this.ma=1;b=this.v.qd;this.dd=1===b&&!this.Ea()||2===b;this.$a=this.sa=-1;this.me=!1}l(){this.P=this.v=null;this.F&&(this.F.disconnect(),this.F=null);this.da&&(this.da.disconnect(),this.da=null);this.G.disconnect();
this.G=null}V(){return this.v.V()}fa(){return Ib(this.v,0<this.oa.length?this.oa[0]:"")}zc(){return this.P.zc()}ob(){return this.P.ob()}yc(){return this.P.yc()}Ea(){return this.P.Ea()}O(){}vc(){}IsPlaying(){return!this.I&&!this.J&&!this.O()}Ra(){}ga(){return this.P.ga()}Play(){}Fa(){}rb(){}Sb(){}Ta(b){-1!==this.$a&&b>=this.$a&&(this.$a=-1,this.me&&this.Fa(),Mb(this.v,"fade-ended",this.oa,this.Yb))}Ac(){const b=this.Pa;return isFinite(b)?b:0}Rb(){return this.v.Rb()}Xb(){}Dc(){}Ia(){}Cc(){}Ec(){}Bc(){}nb(){var b=
this.Yb,a=this.oa,c=this.ga(),d=-1===this.$a?this.Pa:this.G.gain.value,e=this.IsPlaying();if(this.F){var f=this.F;f={pos:this.eb,orient:this.cb,cia:f.coneInnerAngle,coa:f.coneOuterAngle,cog:f.coneOuterGain,uid:this.sa}}else f=null;return{aiid:b,tags:a,duration:c,volume:d,isPlaying:e,playbackTime:this.Ra(),playbackRate:this.ma,uid:this.sa,bufferOriginalUrl:this.zc(),bufferUrl:"",bufferType:this.yc(),isMusic:this.Ea(),isLooping:this.Y,isMuted:this.ya,resumePosition:this.Bc(),pan:f,stereoPan:this.da?
this.nd:null}}Lc(b){var a=b.playbackRate;this.ma!==a&&(this.ma=a,this.Ia());Ob(this,b.isMuted)}};"use strict";
self.Fe=class extends self.yd{constructor(b,a,c){super(b,a,c);this.P.Ib.connect(this.G);this.P.onended=()=>this.Nc()}l(){this.Fa();this.P.Ib.disconnect();super.l()}W(){return this.P.W()}Nc(){this.I=!0;this.sa=-1;Mb(this.v,"ended",this.oa,this.Yb)}O(){return this.W().ended}vc(){return this.I?!0:this.O()}Ra(){let b=this.W().currentTime;this.Y||(b=Math.min(b,this.ga()));return b}Play(b,a,c){const d=this.W();1!==d.playbackRate&&(d.playbackRate=1);d.loop!==b&&(d.loop=b);U(this,a);this.ya=!1;d.muted&&(d.muted=
!1);if(d.currentTime!==c)try{d.currentTime=c}catch(e){console.warn(`[Construct] Exception seeking audio '${this.P.ob()}' to position '${c}': `,e)}this.v.Ga(d);this.J=this.I=!1;this.Y=b;this.ma=1}Fa(){const b=this.W();b.paused||b.pause();this.v.Sa(b);this.I=!0;this.J=!1;this.sa=-1}rb(){if(!(this.J||this.I||this.O())){var b=this.W();b.paused||b.pause();this.v.Sa(b);this.J=!0}}Sb(){!this.J||this.I||this.O()||(this.v.Ga(this.W()),this.J=!1)}Xb(){this.W().muted=this.ya||this.Rb()}Dc(b){b=!!b;this.Y!==
b&&(this.Y=b,this.W().loop=b)}Ia(){let b=this.ma;this.dd&&(b*=this.v.rc);try{this.W().playbackRate=b}catch(a){console.warn(`[Construct] Unable to set playback rate '${b}':`,a)}}Cc(b){if(!this.I&&!this.O())try{this.W().currentTime=b}catch(a){console.warn(`[Construct] Error seeking audio to '${b}': `,a)}}Bc(){return this.Ra()}Ec(b){b?this.IsPlaying()?(this.W().pause(),this.va=!0):this.va=!1:this.va&&(this.v.Ga(this.W()),this.va=!1)}};"use strict";
function W(b){b.s&&(b.s.onended=null,b.s.disconnect(),b.s.buffer=null);b.s=null;b.tb=null}
self.He=class extends self.yd{constructor(b,a,c){super(b,a,c);this.s=null;this.jc=d=>this.Nc(d);this.Zc=!0;this.tb=null;this.S=this.lc=this.nc=0;this.jd=1}l(){this.Fa();W(this);this.jc=null;super.l()}Nc(b){this.J||this.va||b.target!==this.tb||(this.I=this.Zc=!0,this.sa=-1,W(this),Mb(this.v,"ended",this.oa,this.Yb))}O(){return!this.I&&this.s&&this.s.loop||this.J?!1:this.Zc}vc(){return!this.s||this.I?!0:this.O()}Ra(){let b;b=this.J?this.S:this.lc+(V(this)-this.nc)*this.ma;this.Y||(b=Math.min(b,this.ga()));
return b}Play(b,a,c,d){this.ya=!1;this.jd=1;U(this,a);W(this);this.s=this.V().createBufferSource();this.s.buffer=this.P.ia;this.s.connect(this.G);this.tb=this.s;this.s.onended=this.jc;this.s.loop=b;this.s.start(d,c);this.J=this.I=this.Zc=!1;this.Y=b;this.ma=1;this.nc=V(this);this.lc=c}Fa(){if(this.s)try{this.s.stop(0)}catch(b){}this.I=!0;this.J=!1;this.sa=-1}rb(){this.J||this.I||this.O()||(this.S=this.Ra(),this.Y&&(this.S%=this.ga()),this.J=!0,this.s.stop(0))}Sb(){!this.J||this.I||this.O()||(W(this),
this.s=this.V().createBufferSource(),this.s.buffer=this.P.ia,this.s.connect(this.G),this.tb=this.s,this.s.onended=this.jc,this.s.loop=this.Y,U(this,this.Pa),this.Ia(),this.s.start(0,this.S),this.nc=V(this),this.lc=this.S,this.J=!1)}Ac(){return super.Ac()*this.jd}Xb(){this.jd=this.ya||this.Rb()?0:1;U(this,this.Pa)}Dc(b){b=!!b;this.Y!==b&&(this.Y=b,this.s&&(this.s.loop=b))}Ia(){let b=this.ma;this.dd&&(b*=this.v.rc);this.s&&(this.s.playbackRate.value=b)}Cc(b){this.I||this.O()||(this.J?this.S=b:(this.rb(),
this.S=b,this.Sb()))}Bc(){return this.S}Ec(b){b?this.IsPlaying()?(this.va=!0,this.S=this.Ra(),this.Y&&(this.S%=this.ga()),this.s.stop(0)):this.va=!1:this.va&&(W(this),this.s=this.V().createBufferSource(),this.s.buffer=this.P.ia,this.s.connect(this.G),this.tb=this.s,this.s.onended=this.jc,this.s.loop=this.Y,U(this,this.Pa),this.Ia(),this.s.start(0,this.S),this.nc=V(this),this.lc=this.S,this.va=!1)}Lc(b){super.Lc(b);this.S=b.resumePosition}};"use strict";function X(b){return b.g.createGain()}
function Y(b,a,c,d,e){a.cancelScheduledValues(0);if(0===e)a.value=c;else switch(b=b.g.currentTime,e+=b,d){case 0:a.setValueAtTime(c,e);break;case 1:a.setValueAtTime(a.value,b);a.linearRampToValueAtTime(c,e);break;case 2:a.setValueAtTime(a.value,b),a.exponentialRampToValueAtTime(c,e)}}class Z{constructor(b){this.v=b;this.g=b.V();this.ae=-1;this.T=this.od="";this.o=null}l(){this.g=null}N(){}U(){}nb(){return{type:this.T,tag:this.od,params:this.o}}}
self.xe=class extends Z{constructor(b,a,c,d,e,f,g){super(b);this.T="filter";this.o=[a,c,d,e,f,g];this.A=X(this);this.i=X(this);this.i.gain.value=g;this.h=X(this);this.h.gain.value=1-g;this.D=this.g.createBiquadFilter();this.D.type=a;this.D.frequency.value=c;this.D.detune.value=d;this.D.Q.value=e;this.D.gain.vlaue=f;this.A.connect(this.D);this.A.connect(this.h);this.D.connect(this.i)}l(){this.A.disconnect();this.D.disconnect();this.i.disconnect();this.h.disconnect();super.l()}U(b){this.i.disconnect();
this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[5]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 1:this.o[1]=a;Y(this,this.D.frequency,a,c,d);break;case 2:this.o[2]=a;Y(this,this.D.detune,a,c,d);break;case 3:this.o[3]=a;Y(this,this.D.Q,a,c,d);break;case 4:this.o[4]=a,Y(this,this.D.gain,a,c,d)}}};
self.ve=class extends Z{constructor(b,a,c,d){super(b);this.T="delay";this.o=[a,c,d];this.A=X(this);this.i=X(this);this.i.gain.value=d;this.h=X(this);this.h.gain.value=1-d;this.Gb=X(this);this.X=this.g.createDelay(a);this.X.delayTime.value=a;this.xb=X(this);this.xb.gain.value=c;this.A.connect(this.Gb);this.A.connect(this.h);this.Gb.connect(this.i);this.Gb.connect(this.X);this.X.connect(this.xb);this.xb.connect(this.Gb)}l(){this.A.disconnect();this.i.disconnect();this.h.disconnect();this.Gb.disconnect();
this.X.disconnect();this.xb.disconnect();super.l()}U(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){const e=self.lb.Ad;switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[2]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 4:this.o[1]=e(a);Y(this,this.xb.gain,e(a),c,d);break;case 5:this.o[0]=a,Y(this,this.X.delayTime,a,c,d)}}};
self.ue=class extends Z{constructor(b,a,c,d){super(b);this.T="convolution";this.o=[c,d];this.Sd=this.Rd="";this.A=X(this);this.i=X(this);this.i.gain.value=d;this.h=X(this);this.h.gain.value=1-d;this.wb=this.g.createConvolver();this.wb.normalize=c;this.wb.buffer=a;this.A.connect(this.wb);this.A.connect(this.h);this.wb.connect(this.i)}l(){this.A.disconnect();this.wb.disconnect();this.i.disconnect();this.h.disconnect();super.l()}U(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,
a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0),this.o[1]=a,Y(this,this.i.gain,a,c,d),Y(this,this.h.gain,1-a,c,d)}}nb(){const b=super.nb();b.bufferOriginalUrl=this.Rd;b.bufferUrl="";b.bufferType=this.Sd;return b}};
self.ye=class extends Z{constructor(b,a,c,d,e,f){super(b);this.T="flanger";this.o=[a,c,d,e,f];this.A=X(this);this.h=X(this);this.h.gain.value=1-f/2;this.i=X(this);this.i.gain.value=f/2;this.zb=X(this);this.zb.gain.value=e;this.X=this.g.createDelay(a+c);this.X.delayTime.value=a;this.C=this.g.createOscillator();this.C.frequency.value=d;this.K=X(this);this.K.gain.value=c;this.A.connect(this.X);this.A.connect(this.h);this.X.connect(this.i);this.X.connect(this.zb);this.zb.connect(this.X);this.C.connect(this.K);
this.K.connect(this.X.delayTime);this.C.start(0)}l(){this.C.stop(0);this.A.disconnect();this.X.disconnect();this.C.disconnect();this.K.disconnect();this.h.disconnect();this.i.disconnect();this.zb.disconnect();super.l()}U(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[4]=a;Y(this,this.i.gain,a/2,c,d);Y(this,this.h.gain,1-a/2,c,d);break;case 6:this.o[1]=a/1E3;Y(this,this.K.gain,a/1E3,
c,d);break;case 7:this.o[2]=a;Y(this,this.C.frequency,a,c,d);break;case 8:this.o[3]=a/100,Y(this,this.zb.gain,a/100,c,d)}}};
self.Ae=class extends Z{constructor(b,a,c,d,e,f,g){super(b);this.T="phaser";this.o=[a,c,d,e,f,g];this.A=X(this);this.h=X(this);this.h.gain.value=1-g/2;this.i=X(this);this.i.gain.value=g/2;this.D=this.g.createBiquadFilter();this.D.type="allpass";this.D.frequency.value=a;this.D.detune.value=c;this.D.Q.value=d;this.C=this.g.createOscillator();this.C.frequency.value=f;this.K=X(this);this.K.gain.value=e;this.A.connect(this.D);this.A.connect(this.h);this.D.connect(this.i);this.C.connect(this.K);this.K.connect(this.D.frequency);
this.C.start(0)}l(){this.C.stop(0);this.A.disconnect();this.D.disconnect();this.C.disconnect();this.K.disconnect();this.h.disconnect();this.i.disconnect();super.l()}U(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[5]=a;Y(this,this.i.gain,a/2,c,d);Y(this,this.h.gain,1-a/2,c,d);break;case 1:this.o[0]=a;Y(this,this.D.frequency,a,c,d);break;case 2:this.o[1]=a;Y(this,this.D.detune,a,c,d);
break;case 3:this.o[2]=a;Y(this,this.D.Q,a,c,d);break;case 6:this.o[3]=a;Y(this,this.K.gain,a,c,d);break;case 7:this.o[4]=a,Y(this,this.C.frequency,a,c,d)}}};self.ze=class extends Z{constructor(b,a){super(b);this.T="gain";this.o=[a];this.m=X(this);this.m.gain.value=a}l(){this.m.disconnect();super.l()}U(b){this.m.disconnect();this.m.connect(b)}N(){return this.m}Z(b,a,c,d){const e=self.lb.Ad;switch(b){case 4:this.o[0]=e(a),Y(this,this.m.gain,e(a),c,d)}}};
self.Ce=class extends Z{constructor(b,a){super(b);this.T="stereopan";this.o=[a];this.m=this.g.createStereoPanner();this.m.pan.value=a}l(){this.m.disconnect();super.l()}U(b){this.m.disconnect();this.m.connect(b)}N(){return this.m}Z(b,a,c,d){a=Math.min(Math.max(a/100,-1),1);switch(b){case 9:this.o[0]=a,Y(this,this.m.pan,a,c,d)}}};
self.De=class extends Z{constructor(b,a,c){super(b);this.T="tremolo";this.o=[a,c];this.m=X(this);this.m.gain.value=1-c/2;this.C=this.g.createOscillator();this.C.frequency.value=a;this.K=X(this);this.K.gain.value=c/2;this.C.connect(this.K);this.K.connect(this.m.gain);this.C.start(0)}l(){this.C.stop(0);this.C.disconnect();this.K.disconnect();this.m.disconnect();super.l()}U(b){this.m.disconnect();this.m.connect(b)}N(){return this.m}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[1]=
a;Y(this,this.m.gain,1-a/2,c,d);Y(this,this.K.gain,a/2,c,d);break;case 7:this.o[0]=a,Y(this,this.C.frequency,a,c,d)}}};
self.Be=class extends Z{constructor(b,a,c){super(b);this.T="ringmod";this.o=[a,c];this.A=X(this);this.i=X(this);this.i.gain.value=c;this.h=X(this);this.h.gain.value=1-c;this.Lb=X(this);this.Lb.gain.value=0;this.C=this.g.createOscillator();this.C.frequency.value=a;this.C.connect(this.Lb.gain);this.C.start(0);this.A.connect(this.Lb);this.A.connect(this.h);this.Lb.connect(this.i)}l(){this.C.stop(0);this.C.disconnect();this.Lb.disconnect();this.A.disconnect();this.i.disconnect();this.h.disconnect();super.l()}U(b){this.i.disconnect();
this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0);this.o[1]=a;Y(this,this.i.gain,a,c,d);Y(this,this.h.gain,1-a,c,d);break;case 7:this.o[0]=a,Y(this,this.C.frequency,a,c,d)}}};
self.we=class extends Z{constructor(b,a,c,d,e,f){super(b);this.T="distortion";this.o=[a,c,d,e,f];this.A=X(this);this.pc=X(this);this.oc=X(this);b=d;.01>b&&(b=.01);this.pc.gain.value=b;this.oc.gain.value=Math.pow(1/b,.6)*e;this.i=X(this);this.i.gain.value=f;this.h=X(this);this.h.gain.value=1-f;this.sc=this.g.createWaveShaper();this.Uc=new Float32Array(65536);for(e=0;32768>e;++e)f=e/32768,b=1.05*c*a-a,d=0>f?-f:f,d<a?b=d:(d=1-Math.exp(-(1/b)*(d-a)),b=a+b*d),f=b*(0>f?-1:1),this.Uc[32768+e]=f,this.Uc[32768-
e-1]=-f;this.sc.curve=this.Uc;this.A.connect(this.pc);this.A.connect(this.h);this.pc.connect(this.sc);this.sc.connect(this.oc);this.oc.connect(this.i)}l(){this.A.disconnect();this.pc.disconnect();this.sc.disconnect();this.oc.disconnect();this.i.disconnect();this.h.disconnect();super.l()}U(b){this.i.disconnect();this.i.connect(b);this.h.disconnect();this.h.connect(b)}N(){return this.A}Z(b,a,c,d){switch(b){case 0:a=Math.max(Math.min(a/100,1),0),this.o[4]=a,Y(this,this.i.gain,a,c,d),Y(this,this.h.gain,
1-a,c,d)}}};self.te=class extends Z{constructor(b,a,c,d,e,f){super(b);this.T="compressor";this.o=[a,c,d,e,f];this.m=this.g.createDynamicsCompressor();this.m.threshold.value=a;this.m.knee.value=c;this.m.ratio.value=d;this.m.attack.value=e;this.m.release.value=f}l(){this.m.disconnect();super.l()}U(b){this.m.disconnect();this.m.connect(b)}N(){return this.m}Z(){}};
self.se=class extends Z{constructor(b,a,c){super(b);this.T="analyser";this.o=[a,c];this.m=this.g.createAnalyser();this.m.fftSize=a;this.m.smoothingTimeConstant=c;this.Yd=new Float32Array(this.m.frequencyBinCount);this.le=new Uint8Array(a);this.je=this.fb=0;b=this.v;b.Wa.add(this);T(b)}l(){this.v.Wa.delete(this);this.m.disconnect();super.l()}Ta(){this.m.getFloatFrequencyData(this.Yd);this.m.getByteTimeDomainData(this.le);const b=this.m.fftSize;let a=this.fb=0;for(var c=0;c<b;++c){let d=(this.le[c]-
128)/128;0>d&&(d=-d);this.fb<d&&(this.fb=d);a+=d*d}c=self.lb.Oe;this.fb=c(this.fb);this.je=c(Math.sqrt(a/b))}U(b){this.m.disconnect();this.m.connect(b)}N(){return this.m}Z(){}};"use strict";function Sb(b){return new Promise((a,c)=>{b.getInsetTop(a,c)})}function Tb(b){return new Promise((a,c)=>{b.getInsetRight(a,c)})}function Ub(b){return new Promise((a,c)=>{b.getInsetBottom(a,c)})}function Vb(b){return new Promise((a,c)=>{b.getInsetLeft(a,c)})}
async function Wb(b){if(!b.Na)try{b.Na=await navigator.wakeLock.request("screen"),b.Na.addEventListener("release",()=>{console.log("[Construct] Screen wake lock released");b.Na=null;m(b,"wake-lock-released")}),console.log("[Construct] Screen wake lock acquired"),m(b,"wake-lock-acquired")}catch(a){console.warn("[Construct] Failed to acquire screen wake lock: ",a),m(b,"wake-lock-error")}}
async function Xb(b){const a=await Yb();m(b,"window-resize",{windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,safeAreaInset:a})}
async function Yb(){var b=self.AndroidNotch;if(b)try{return await Promise.all([Sb(b),Tb(b),Ub(b),Vb(b)])}catch(c){return console.error("[Construct] Failed to get Android safe area inset: ",c),[0,0,0,0]}else{var a=document.body;b=a.style;b.setProperty("--temp-sai-top","env(safe-area-inset-top)");b.setProperty("--temp-sai-right","env(safe-area-inset-right)");b.setProperty("--temp-sai-bottom","env(safe-area-inset-bottom)");b.setProperty("--temp-sai-left","env(safe-area-inset-left)");a=getComputedStyle(a);
a=[a.getPropertyValue("--temp-sai-top"),a.getPropertyValue("--temp-sai-right"),a.getPropertyValue("--temp-sai-bottom"),a.getPropertyValue("--temp-sai-left")].map(c=>{c=parseInt(c,10);return isFinite(c)?c:0});b.removeProperty("--temp-sai-top");b.removeProperty("--temp-sai-right");b.removeProperty("--temp-sai-bottom");b.removeProperty("--temp-sai-left");return a}}
self.ba.xa(class extends self.Qa{constructor(b){super(b,"platform-info");p(this,[["get-initial-state",()=>this.Oc()],["request-wake-lock",()=>Wb(this)],["release-wake-lock",()=>{this.Na&&(this.Na.release(),this.Na=null)}]]);window.addEventListener("resize",()=>Xb(this));this.Na=null}async Oc(){const b=await Yb();return{screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,safeAreaInset:b,supportsWakeLock:!!navigator.wakeLock,isNwjs:"undefined"!==
typeof nw}}});"use strict";function Zb(){}function $b(b){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(a=>m(b,"sw-message",a.data))}
function ac(b){b=b.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(b).catch(a=>console.warn("[Construct] Failed to lock orientation: ",a));else try{let a=!1;screen.lockOrientation?a=screen.lockOrientation(b):screen.webkitLockOrientation?a=screen.webkitLockOrientation(b):screen.mozLockOrientation?a=screen.mozLockOrientation(b):screen.msLockOrientation&&(a=screen.msLockOrientation(b));a||console.warn("[Construct] Failed to lock orientation")}catch(a){console.warn("[Construct] Failed to lock orientation: ",
a)}}
self.ba.xa(class extends self.Qa{constructor(b){super(b,"browser");this.u="";p(this,[["get-initial-state",a=>this.Oc(a)],["ready-for-sw-messages",()=>$b(this)],["alert",a=>this.Mc(a)],["close",()=>{navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}],["set-focus",a=>this.Pc(a)],["vibrate",a=>{navigator.vibrate&&navigator.vibrate(a.pattern)}],["lock-orientation",a=>ac(a)],["unlock-orientation",()=>{try{screen.orientation&&screen.orientation.unlock?
screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(a){}}],["navigate",a=>{var c=a.type;if("back"===c)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.history.back();else if("forward"===c)window.history.forward();else if("reload"===c)location.reload();else if("url"===
c){c=a.url;const d=a.target;a=a.exportType;self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(c,"_system"):"preview"===a||this.j.pa()?window.open(c,"_blank"):this.Lf||(2===d?window.top.location=c:1===d?window.parent.location=c:window.location=c)}else"new-window"===c&&(c=a.url,a=a.tag,self.cordova&&self.cordova.InAppBrowser?self.cordova.InAppBrowser.open(c,"_system"):window.open(c,a))}],["request-fullscreen",a=>{if(this.j.pa()||"macos-wkwebview"===this.u)self.ba.Wb(!0),this.j.Ha({type:"set-fullscreen",
fullscreen:!0});else{const c={navigationUI:"auto"};a=a.navUI;1===a?c.navigationUI="hide":2===a&&(c.navigationUI="show");a=document.documentElement;let d;a.requestFullscreen?d=a.requestFullscreen(c):a.mozRequestFullScreen?d=a.mozRequestFullScreen(c):a.msRequestFullscreen?d=a.msRequestFullscreen(c):a.webkitRequestFullScreen&&(d="undefined"!==typeof Element.ALLOW_KEYBOARD_INPUT?a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):a.webkitRequestFullScreen());d instanceof Promise&&d.catch(Zb)}}],["exit-fullscreen",
()=>{if(this.j.pa()||"macos-wkwebview"===this.u)self.ba.Wb(!1),this.j.Ha({type:"set-fullscreen",fullscreen:!1});else{let a;document.exitFullscreen?a=document.exitFullscreen():document.mozCancelFullScreen?a=document.mozCancelFullScreen():document.msExitFullscreen?a=document.msExitFullscreen():document.webkitCancelFullScreen&&(a=document.webkitCancelFullScreen());a instanceof Promise&&a.catch(Zb)}}],["set-hash",a=>{location.hash=a.hash}],["set-document-css-style",a=>{const c=a.prop,d=a.value;var e=
a.selector;a=a["is-all"];try{if(e)if(a)var f=Array.from(document.querySelectorAll(e));else{var g=document.querySelector(e);f=g?[g]:[]}else f=[document.documentElement];e=f;for(const h of e)c.startsWith("--")?h.style.setProperty(c,d):h.style[c]=d}catch(h){console.warn("[Browser] Failed to set style: ",h)}}],["get-document-css-style",a=>{{const d=a.prop;a=a.selector;try{const e=document.querySelector(a);var c=e?{isOk:!0,result:window.getComputedStyle(e).getPropertyValue(d)}:{isOk:!1}}catch(e){console.warn("[Browser] Failed to get style: ",
e),c={isOk:!1}}}return c}],["set-window-size",a=>{window.resizeTo(a.windowWidth,a.windowHeight)}],["set-window-position",a=>{window.moveTo(a.windowX,a.windowY)}]]);window.addEventListener("online",()=>{m(this,"online-state",{isOnline:!0})});window.addEventListener("offline",()=>{m(this,"online-state",{isOnline:!1})});window.addEventListener("hashchange",()=>{m(this,"hashchange",{location:location.toString()})});document.addEventListener("backbutton",()=>{m(this,"backbutton")})}Oc(b){this.u=b.exportType;
return{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isConstructArcade:"undefined"!==typeof window.is_scirra_arcade}}Mc(b){alert(b.message)}Pc(b){b=b.isFocus;if("nwjs"===this.u){const a="nwjs"===this.u?nw.Window.get():null;b?a.focus():a.blur()}else b?window.focus():window.blur()}});
